/*! step10 2017-06-24 */

function Buttons(){this.on=1;this.update(1);for(var t=1;t<=3;t++)this.configButton(t)}function Simon(t){console.log("Simon Started"),this.state="initial",this.sequence=[],this.sequence.push(Math.floor(4*Math.random())),this.current=0,this.configureButton=function(t,e){var n=$(this.form.find("input").get(t)),o=this;n.click(function(n){"enter"!==o.state&&"fail"!==o.state||(o.buttonPress(t,e),"fail"===o.state?(document.getElementById("buzzer").currentTime=0,document.getElementById("buzzer").play(),window.setTimeout(function(){window.location.replace("")},1e3)):(document.getElementById(e).currentTime=0,document.getElementById(e).play()))}),n.mousedown(function(t){"enter"===o.state&&n.css("background-color",e)}),n.mouseup(function(t){"enter"===o.state&&n.css("background-color","lightgrey")})},this.form=$(t),this.configureButton(0,"red"),this.configureButton(1,"green"),this.configureButton(2,"blue"),this.configureButton(3,"yellow"),this.play()}Buttons.prototype.configButton=function(t){var e=3==t?1:t+1,n=this;$("#b"+t).click(function(){n.on==t&&n.update(e)})},Buttons.prototype.update=function(t){this.on=t,$("#b1").css("background-color",1==this.on?"red":"green"),$("#b2").css("background-color",2==this.on?"red":"green"),$("#b3").css("background-color",3==this.on?"red":"green"),$("#b1").html(1==this.on?"Press Me":"&nbsp;"),$("#b2").html(2==this.on?"Press Me":"&nbsp;"),$("#b3").html(3==this.on?"Press Me":"&nbsp;")},Simon.prototype.play=function(){console.log(this.sequence),this.state="play",this.current=0,this.playCurrent()},Simon.prototype.playCurrent=function(){var t=this;if(this.current<this.sequence.length){var e=["red","green","blue","yellow"];document.getElementById(e[this.sequence[this.current]]).play(),this.buttonOn(this.sequence[this.current]),this.current++,window.setTimeout(function(){t.playCurrent()},1e3)}else this.buttonOn(-1),this.state="enter",this.current=0},Simon.prototype.buttonOn=function(t){var e=["red","green","blue","yellow"],n=this;if(-1!==t){var o;for(o=0;o<=3;o++)o===t?$(n.form.find("input").get(o)).css("background-color",e[o]):$(n.form.find("input").get(o)).css("background-color","lightgrey");console.log("\n")}else for(var s=0;s<=3;s++)$(n.form.find("input").get(s)).css("background-color","lightgrey")},Simon.prototype.buttonPress=function(t,e){console.log(this.state);var n=this;if(console.log("Button pressed: "+t),console.log("current index: "+this.current),console.log("current value to match: "+this.sequence[this.current]+"\n"),t!==this.sequence[this.current])return console.log("************* WRONG GUESS LOSER **************"),void(this.state="fail");++this.current===this.sequence.length&&(console.log("done guessing\n"),this.sequence.push(Math.floor(4*Math.random())),window.setTimeout(function(){n.play()},1e3))};